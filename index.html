<!DOCTYPE html>
<html lang="et">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Ainemapp</title>
        <link rel="stylesheet" href="./assets/style.css">
    </head>

   
    <body>
        <h1>Minu portfoolio TTHK/TECHNOs Ãµpitud ainetest</h1>
        <br/>
        <p>Siin on erialased Ãµpitud ainetes tehtud tÃ¶Ã¶d, ja muud Ã¼lesannete vÃ¤ljundid</p>
        <ul>
            <li><a href="./SDLC.html">Tarkvara Arendusprotsess</a></li>
            <li>Programmeerimise Alused</li>
            <li>Programmeerimine I</li>
            <li>AndmebaasidesÃ¼stemide alused I</li>
            <li>AndmebaasidesÃ¼steemide alused II</li>
            <li>Veebirakenduste loomise alused</li>
            <li>Multimeedia</li>
            <li>VÃµrgurakendused</li>
            <li>Mobiilirakendused</li>
        </ul>

        <br/><br/>
        ----------------------------------------------------------
        <br/><br/>
        <h2>Kes ma olen?</h2>
        <p style="font-size: 2px; color: gray">autist</p>
        
        <table>
            <tr>
                <td>Minu nimi</td>
                <td>Ervin PÃ¼sijainen</td>
            </tr>
            <tr>
                <td>Mida ma teen?</td>
                <td>Kirjutan koodi ja skison muusikaga</td>
            </tr>
            <tr>
                <td>Kust ma tulen?</td>
                <td>Pommiaugust (Valga ðŸ˜ŠðŸ˜ŠðŸ˜Š) </td>
            </tr>
            <tr>
                <td>Pilt</td>
                <td><img 
                    id="cow" 
                    draggable="false"
                    style="width: 200px; position: absolute; cursor: grab" 
                    src="./assets/Cow sticker.png" 
                    alt="confused cow"></td>
            </tr>
        </table>
        

    
        <script>
            const cow = document.getElementById("cow");

            cow.addEventListener("dragstart", (e) => e.preventDefault());

            let isDragging = false;
            let offsetX = 0;
            let fixedY = 0;

            let targetX = 0;
            let isIdle = true;
            let walkSpeed = 0.4;

            function clampX(x) {
                const cowWidth = cow.offsetWidth;
                const viewportWidth = window.innerWidth;
                return Math.max(0, Math.min(x, viewportWidth - cowWidth));
            }

            function chooseNewTarget() {
                const cowWidth = cow.offsetWidth;
                const maxX = window.innerWidth - cowWidth;
                targetX = Math.random() * maxX;
            }

            function idleWalk() {
                if (isIdle && !isDragging) {
                const currentX = parseFloat(cow.style.left);

                const distance = targetX - currentX;
                if (Math.abs(distance) < 0.5) {
                    setTimeout(chooseNewTarget, 1000 + Math.random() * 2000);
                } else {
                    cow.style.left = clampX(currentX + Math.sign(distance) * walkSpeed) + "px";
                }
                }

                requestAnimationFrame(idleWalk);
            }

            cow.addEventListener("mousedown", (e) => {
                isDragging = true;
                isIdle = false;
                cow.style.cursor = "grabbing";

                offsetX = e.clientX - cow.offsetLeft;
                fixedY = cow.offsetTop;
            });

            document.addEventListener("mousemove", (e) => {
                if (!isDragging) return;

                let newLeft = e.clientX - offsetX;
                cow.style.left = clampX(newLeft) + "px";
                cow.style.top = fixedY + "px";
            });

            document.addEventListener("mouseup", () => {
                if (!isDragging) return;
                isDragging = false;
                cow.style.cursor = "grab";
                isIdle = true;
                chooseNewTarget();
            });

            // ðŸš€ Initialize AFTER layout
            window.addEventListener("load", () => {
                const rect = cow.getBoundingClientRect();

                cow.style.position = "absolute";
                cow.style.left = rect.left + "px";
                cow.style.top = rect.top + "px";

                chooseNewTarget();
                idleWalk();
            });
                        
        </script>

    </body>
</html>